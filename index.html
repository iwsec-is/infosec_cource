<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Регистрация с Firebase</title>
</head>
<body>

<div id="registration" class="popup">
    <h2>Регистрация</h2>
    <input type="text" id="name" placeholder="Имя Фамилия" class="button"><br><br>
    <input type="email" id="email" placeholder="Email" class="button"><br><br>
    <button class="button" onclick="register()">Далее</button>
</div>

<script type="module">
  // Импортируем нужные функции из Firebase SDK
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js";
  import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore.js";

  // Конфигурация Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyD0QXeu6sT7w6GfIbu-qgTv4eHlMlMLuf4",
    authDomain: "web-training-is.firebaseapp.com",
    projectId: "web-training-is",
    storageBucket: "web-training-is.firebasestorage.app",
    messagingSenderId: "534413548505",
    appId: "1:534413548505:web:ec82b1749cca4cfc1757c8",
    measurementId: "G-XQ1K7B1CZF"
  };

  // Инициализация Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Функция для регистрации
  async function register() {
    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;

    if (name && email) {
      try {
        // Добавление данных в коллекцию 'users'
        const docRef = await addDoc(collection(db, "users"), {
          name: name,
          email: email
        });
        alert("Регистрация успешна!");
      } catch (e) {
        console.error("Ошибка при добавлении данных: ", e);
        alert("Ошибка при добавлении данных.");
      }
    } else {
      alert("Пожалуйста, заполните все поля.");
    }
  }
</script>

</body>
</html>
